{"uid":"da92e4c256984ef2","name":"PUT /post/{id}: attempt to update owner -> should be 400 or ignored","fullName":"tests.posts.test_post_negative.TestPostsNegative#test_update_post_owner_forbidden_or_ignored","historyId":"11df4afd5cf17f7ec830799068d25805","time":{"start":1769709932041,"stop":1769709933419,"duration":1378},"status":"failed","statusMessage":"AssertionError: {\"error\":\"SERVER_ERROR\"}","statusTrace":"self = <allure_commons._allure.fixture object at 0x00000163D13C2C00>, args = (), kwargs = {}\n\n    def __call__(self, *args, **kwargs):\n        self.parameters = func_parameters(self._fixture_function, *args, **kwargs)\n    \n        with self:\n>           return self._fixture_function(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv\\Lib\\site-packages\\allure_commons\\_allure.py:231: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ntests\\conftest.py:139: in post_factory\n    posts_api.delete_post(post_id, allow_not_found=True)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <services.posts.api_posts.PostsAPI object at 0x00000163D0EF03B0>, post_id = '697ba151bc2d0f3b7eb0e193', allow_not_found = True\n\n    @allure.step(\"Delete post by id: {post_id}\")\n    def delete_post(self, post_id: str, allow_not_found: bool = False) -> str | None:\n        resp = self.delete_post_response(post_id)\n    \n        if allow_not_found and resp.status_code == 404:\n            return None  # docs: delete returns string\n>       assert resp.status_code in (200, 204), resp.text\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE       AssertionError: {\"error\":\"SERVER_ERROR\"}\n\nservices\\posts\\api_posts.py:94: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"base_url","time":{"start":1769709855026,"stop":1769709855026,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"_session_faker","time":{"start":1769709855026,"stop":1769709855026,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"env_check","time":{"start":1769709855026,"stop":1769709855636,"duration":610},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"api_token","time":{"start":1769709855026,"stop":1769709855026,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"http","time":{"start":1769709855026,"stop":1769709855026,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"comments_api","time":{"start":1769709855636,"stop":1769709855636,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"comment_endpoints","time":{"start":1769709855636,"stop":1769709855636,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"post_endpoints","time":{"start":1769709855636,"stop":1769709855636,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"users_api","time":{"start":1769709855636,"stop":1769709855636,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"posts_api","time":{"start":1769709855636,"stop":1769709855636,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"endpoints","time":{"start":1769709855636,"stop":1769709855636,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"created_user","time":{"start":1769709931838,"stop":1769709932041,"duration":203},"status":"passed","steps":[{"name":"Create user","time":{"start":1769709931838,"stop":1769709932041,"duration":203},"status":"passed","steps":[{"name":"POST /user/create (raw)","time":{"start":1769709931838,"stop":1769709932041,"duration":203},"status":"passed","steps":[],"attachments":[{"uid":"8dc4d945fb1f3f95","name":"API Response","source":"8dc4d945fb1f3f95.json","type":"application/json","size":333}],"parameters":[{"name":"payload","value":"None"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true},{"name":"user_factory","time":{"start":1769709931838,"stop":1769709931838,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"_init_clients","time":{"start":1769709931838,"stop":1769709931838,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"post_factory","time":{"start":1769709932041,"stop":1769709932041,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: {\"error\":\"SERVER_ERROR\"}","statusTrace":"self = <allure_commons._allure.fixture object at 0x00000163D13C2C00>, args = (), kwargs = {}\n\n    def __call__(self, *args, **kwargs):\n        self.parameters = func_parameters(self._fixture_function, *args, **kwargs)\n    \n        with self:\n>           return self._fixture_function(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv\\Lib\\site-packages\\allure_commons\\_allure.py:231: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ntests\\conftest.py:139: in post_factory\n    posts_api.delete_post(post_id, allow_not_found=True)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <services.posts.api_posts.PostsAPI object at 0x00000163D0EF03B0>, post_id = '697ba151bc2d0f3b7eb0e193', allow_not_found = True\n\n    @allure.step(\"Delete post by id: {post_id}\")\n    def delete_post(self, post_id: str, allow_not_found: bool = False) -> str | None:\n        resp = self.delete_post_response(post_id)\n    \n        if allow_not_found and resp.status_code == 404:\n            return None  # docs: delete returns string\n>       assert resp.status_code in (200, 204), resp.text\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE       AssertionError: {\"error\":\"SERVER_ERROR\"}\n\nservices\\posts\\api_posts.py:94: AssertionError","steps":[{"name":"Create post (owner='697ba1518c52052eadfd2024')","time":{"start":1769709932041,"stop":1769709932588,"duration":547},"status":"passed","steps":[{"name":"POST /post/create (raw)","time":{"start":1769709932041,"stop":1769709932588,"duration":547},"status":"passed","steps":[],"attachments":[{"uid":"28289ce562ee4e6b","name":"API Response","source":"28289ce562ee4e6b.json","type":"application/json","size":448}],"parameters":[{"name":"payload","value":"{'text': 'Auto post b007a01a', 'image': 'https://images.unsplash.com/photo-1542291026-7eec264c27ff', 'likes': 0, 'tags': ['qa', 'pytest'], 'owner': '697ba1518c52052eadfd2024'}"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[{"name":"owner_id","value":"'697ba1518c52052eadfd2024'"},{"name":"payload","value":"None"}],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true},{"name":"Try to update forbidden field: owner","time":{"start":1769709932588,"stop":1769709933060,"duration":472},"status":"passed","steps":[{"name":"PUT /post/'697ba151bc2d0f3b7eb0e193' (raw)","time":{"start":1769709932588,"stop":1769709933060,"duration":472},"status":"passed","steps":[],"attachments":[{"uid":"2e8de792e73f042e","name":"API Response","source":"2e8de792e73f042e.json","type":"application/json","size":448}],"parameters":[{"name":"post_id","value":"'697ba151bc2d0f3b7eb0e193'"},{"name":"payload","value":"{'owner': '000000000000000000000000'}"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true},{"name":"If API rejects -> expect 400 BODY_NOT_VALID","time":{"start":1769709933060,"stop":1769709933060,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"If API returns 200 -> verify owner did NOT change","time":{"start":1769709933060,"stop":1769709933419,"duration":359},"status":"passed","steps":[{"name":"Get post by id: '697ba151bc2d0f3b7eb0e193'","time":{"start":1769709933060,"stop":1769709933419,"duration":359},"status":"passed","steps":[{"name":"GET /post/'697ba151bc2d0f3b7eb0e193' (raw)","time":{"start":1769709933060,"stop":1769709933419,"duration":359},"status":"passed","steps":[],"attachments":[{"uid":"b38c496980e7b5f6","name":"API Response","source":"b38c496980e7b5f6.json","type":"application/json","size":448}],"parameters":[{"name":"post_id","value":"'697ba151bc2d0f3b7eb0e193'"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[{"name":"post_id","value":"'697ba151bc2d0f3b7eb0e193'"}],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":8,"shouldDisplayMessage":true,"attachmentsCount":3,"attachmentStep":false,"hasContent":true},"afterStages":[{"name":"post_factory::0","time":{"start":1769709933419,"stop":1769709933772,"duration":353},"status":"failed","statusMessage":"AssertionError: {\"error\":\"SERVER_ERROR\"}\n","statusTrace":"  File \"C:\\Users\\14bas\\PycharmProjects\\api-test-0\\.venv\\Lib\\site-packages\\allure_commons\\_allure.py\", line 231, in __call__\n    return self._fixture_function(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\14bas\\PycharmProjects\\api-test-0\\.venv\\Lib\\site-packages\\_pytest\\fixtures.py\", line 924, in _teardown_yield_fixture\n    next(it)\n  File \"C:\\Users\\14bas\\PycharmProjects\\api-test-0\\tests\\conftest.py\", line 139, in post_factory\n    posts_api.delete_post(post_id, allow_not_found=True)\n  File \"C:\\Users\\14bas\\PycharmProjects\\api-test-0\\.venv\\Lib\\site-packages\\allure_commons\\_allure.py\", line 202, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"C:\\Users\\14bas\\PycharmProjects\\api-test-0\\services\\posts\\api_posts.py\", line 94, in delete_post\n    assert resp.status_code in (200, 204), resp.text\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"Delete post by id: '697ba151bc2d0f3b7eb0e193'","time":{"start":1769709933419,"stop":1769709933772,"duration":353},"status":"failed","statusMessage":"AssertionError: {\"error\":\"SERVER_ERROR\"}\n","statusTrace":"  File \"C:\\Users\\14bas\\PycharmProjects\\api-test-0\\.venv\\Lib\\site-packages\\allure_commons\\_allure.py\", line 202, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"C:\\Users\\14bas\\PycharmProjects\\api-test-0\\services\\posts\\api_posts.py\", line 94, in delete_post\n    assert resp.status_code in (200, 204), resp.text\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"DELETE /post/'697ba151bc2d0f3b7eb0e193' (raw)","time":{"start":1769709933419,"stop":1769709933772,"duration":353},"status":"passed","steps":[],"attachments":[{"uid":"e14a6118d6883127","name":"API Response","source":"e14a6118d6883127.json","type":"application/json","size":31}],"parameters":[{"name":"post_id","value":"'697ba151bc2d0f3b7eb0e193'"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[{"name":"post_id","value":"'697ba151bc2d0f3b7eb0e193'"},{"name":"allow_not_found","value":"True"}],"stepsCount":1,"shouldDisplayMessage":true,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true},{"name":"user_factory::0","time":{"start":1769709933783,"stop":1769709934280,"duration":497},"status":"passed","steps":[{"name":"Delete user by id: '697ba1518c52052eadfd2024'","time":{"start":1769709933783,"stop":1769709934280,"duration":497},"status":"passed","steps":[{"name":"DELETE /user/'697ba1518c52052eadfd2024' (raw)","time":{"start":1769709933783,"stop":1769709934280,"duration":497},"status":"passed","steps":[],"attachments":[{"uid":"f641bc364801ba72","name":"API Response","source":"f641bc364801ba72.json","type":"application/json","size":40}],"parameters":[{"name":"user_id","value":"'697ba1518c52052eadfd2024'"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[{"name":"user_id","value":"'697ba1518c52052eadfd2024'"},{"name":"allow_not_found","value":"True"}],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true},{"name":"http::0","time":{"start":1769709962933,"stop":1769709962933,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false}],"labels":[{"name":"feature","value":"Posts"},{"name":"epic","value":"Administration"},{"name":"tag","value":"regression"},{"name":"tag","value":"negative"},{"name":"parentSuite","value":"tests.posts"},{"name":"suite","value":"test_post_negative"},{"name":"subSuite","value":"TestPostsNegative"},{"name":"host","value":"keni"},{"name":"thread","value":"18868-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.posts.test_post_negative"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"5053aa62e19c914","status":"passed","time":{"start":1769699740790,"stop":1769699741578,"duration":788}}],"categories":[{"name":"Product defects","matchedStatuses":[]}],"history":{"statistic":{"failed":4,"broken":0,"skipped":0,"passed":4,"unknown":0,"total":8},"items":[{"uid":"5c048aee22faf650","status":"failed","statusDetails":"AssertionError: {\"error\":\"SERVER_ERROR\"}","time":{"start":1769709932041,"stop":1769709933419,"duration":1378}},{"uid":"be6b690bd7394b8d","status":"failed","statusDetails":"AssertionError: {\"error\":\"SERVER_ERROR\"}","time":{"start":1769709932041,"stop":1769709933419,"duration":1378}},{"uid":"cf4bc57cabac25ca","status":"failed","statusDetails":"AssertionError: {\"error\":\"SERVER_ERROR\"}","time":{"start":1769709932041,"stop":1769709933419,"duration":1378}},{"uid":"7b7dcd9c0d26dfec","status":"passed","time":{"start":1769699740790,"stop":1769699741578,"duration":788}},{"uid":"11212a1b1b57d837","status":"passed","time":{"start":1769699740790,"stop":1769699741578,"duration":788}},{"uid":"4896f4c2ad365759","status":"passed","time":{"start":1769699740790,"stop":1769699741578,"duration":788}},{"uid":"e4985311a7d8e69c","status":"passed","time":{"start":1769699740790,"stop":1769699741578,"duration":788}}]},"tags":["negative","regression"]},"source":"da92e4c256984ef2.json","parameterValues":[]}