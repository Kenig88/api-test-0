{"uid":"a27197cfa6de4a9a","name":"List comments by post contains created comment","fullName":"tests.comments.test_comments_regression.TestComments#test_list_comments_by_post_contains_created","historyId":"c6bf5587eb55759727fd90b7c3d19616","time":{"start":1769709904931,"stop":1769709905747,"duration":816},"status":"failed","statusMessage":"AssertionError: {'error': 'SERVER_ERROR'}","statusTrace":"self = <allure_commons._allure.fixture object at 0x00000163D133FB30>, args = (), kwargs = {}\n\n    def __call__(self, *args, **kwargs):\n        self.parameters = func_parameters(self._fixture_function, *args, **kwargs)\n    \n        with self:\n>           return self._fixture_function(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv\\Lib\\site-packages\\allure_commons\\_allure.py:231: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ntests\\conftest.py:96: in user_factory\n    users_api.delete_user(user_id, allow_not_found=True)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <services.users.api_users.UsersAPI object at 0x00000163D0EC4BF0>, user_id = '697ba1368c520505ccfd2007', allow_not_found = True\n\n    @allure.step(\"Delete user by id: {user_id}\")\n    def delete_user(self, user_id: str, allow_not_found: bool = False) -> None:\n        response = self.delete_user_response(user_id)\n    \n        if allow_not_found and response.status_code == 404:\n            return\n    \n        # dummyapi обычно 200/204\n        try:\n            body = response.json()\n        except Exception:\n            body = {\"text\": response.text}\n    \n>       assert response.status_code in (200, 204), body\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE       AssertionError: {'error': 'SERVER_ERROR'}\n\nservices\\users\\api_users.py:105: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"base_url","time":{"start":1769709855026,"stop":1769709855026,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"_session_faker","time":{"start":1769709855026,"stop":1769709855026,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"env_check","time":{"start":1769709855026,"stop":1769709855636,"duration":610},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"api_token","time":{"start":1769709855026,"stop":1769709855026,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"http","time":{"start":1769709855026,"stop":1769709855026,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"comments_api","time":{"start":1769709855636,"stop":1769709855636,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"comment_endpoints","time":{"start":1769709855636,"stop":1769709855636,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"post_endpoints","time":{"start":1769709855636,"stop":1769709855636,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"users_api","time":{"start":1769709855636,"stop":1769709855636,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"posts_api","time":{"start":1769709855636,"stop":1769709855636,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"endpoints","time":{"start":1769709855636,"stop":1769709855636,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"created_user","time":{"start":1769709904620,"stop":1769709904931,"duration":311},"status":"passed","steps":[{"name":"Create user","time":{"start":1769709904620,"stop":1769709904931,"duration":311},"status":"passed","steps":[{"name":"POST /user/create (raw)","time":{"start":1769709904620,"stop":1769709904931,"duration":311},"status":"passed","steps":[],"attachments":[{"uid":"11b1c1dac4598527","name":"API Response","source":"11b1c1dac4598527.json","type":"application/json","size":336}],"parameters":[{"name":"payload","value":"None"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true},{"name":"_init_clients","time":{"start":1769709904620,"stop":1769709904620,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"user_factory","time":{"start":1769709904620,"stop":1769709904620,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"comment_factory","time":{"start":1769709904931,"stop":1769709904931,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"post_factory","time":{"start":1769709904931,"stop":1769709904931,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: {'error': 'SERVER_ERROR'}","statusTrace":"self = <allure_commons._allure.fixture object at 0x00000163D133FB30>, args = (), kwargs = {}\n\n    def __call__(self, *args, **kwargs):\n        self.parameters = func_parameters(self._fixture_function, *args, **kwargs)\n    \n        with self:\n>           return self._fixture_function(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n.venv\\Lib\\site-packages\\allure_commons\\_allure.py:231: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ntests\\conftest.py:96: in user_factory\n    users_api.delete_user(user_id, allow_not_found=True)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <services.users.api_users.UsersAPI object at 0x00000163D0EC4BF0>, user_id = '697ba1368c520505ccfd2007', allow_not_found = True\n\n    @allure.step(\"Delete user by id: {user_id}\")\n    def delete_user(self, user_id: str, allow_not_found: bool = False) -> None:\n        response = self.delete_user_response(user_id)\n    \n        if allow_not_found and response.status_code == 404:\n            return\n    \n        # dummyapi обычно 200/204\n        try:\n            body = response.json()\n        except Exception:\n            body = {\"text\": response.text}\n    \n>       assert response.status_code in (200, 204), body\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE       AssertionError: {'error': 'SERVER_ERROR'}\n\nservices\\users\\api_users.py:105: AssertionError","steps":[{"name":"Create post (owner='697ba1368c520505ccfd2007')","time":{"start":1769709904931,"stop":1769709905183,"duration":252},"status":"passed","steps":[{"name":"POST /post/create (raw)","time":{"start":1769709904931,"stop":1769709905183,"duration":252},"status":"passed","steps":[],"attachments":[{"uid":"1e6d98714ac25110","name":"API Response","source":"1e6d98714ac25110.json","type":"application/json","size":451}],"parameters":[{"name":"payload","value":"{'text': 'Auto post 66bd0745', 'image': 'https://images.unsplash.com/photo-1542291026-7eec264c27ff', 'likes': 0, 'tags': ['qa', 'pytest'], 'owner': '697ba1368c520505ccfd2007'}"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[{"name":"owner_id","value":"'697ba1368c520505ccfd2007'"},{"name":"payload","value":"None"}],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true},{"name":"Create comment (owner='697ba1368c520505ccfd2007', post='697ba136699468306314bc72')","time":{"start":1769709905183,"stop":1769709905446,"duration":263},"status":"passed","steps":[{"name":"POST /comment/create (raw)","time":{"start":1769709905183,"stop":1769709905446,"duration":263},"status":"passed","steps":[],"attachments":[{"uid":"c7be366ad3618605","name":"API Response","source":"c7be366ad3618605.json","type":"application/json","size":292}],"parameters":[{"name":"payload","value":"{'message': 'Auto comment 1c33384d', 'owner': '697ba1368c520505ccfd2007', 'post': '697ba136699468306314bc72'}"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[{"name":"owner_id","value":"'697ba1368c520505ccfd2007'"},{"name":"post_id","value":"'697ba136699468306314bc72'"},{"name":"payload","value":"None"}],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true},{"name":"List comments by post: '697ba136699468306314bc72'","time":{"start":1769709905446,"stop":1769709905747,"duration":301},"status":"passed","steps":[{"name":"GET /post/'697ba136699468306314bc72'/comment (raw)","time":{"start":1769709905446,"stop":1769709905747,"duration":301},"status":"passed","steps":[],"attachments":[{"uid":"855e1cbd9e56055b","name":"API Response","source":"855e1cbd9e56055b.json","type":"application/json","size":452}],"parameters":[{"name":"post_id","value":"'697ba136699468306314bc72'"},{"name":"limit","value":"50"},{"name":"page","value":"0"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[{"name":"post_id","value":"'697ba136699468306314bc72'"},{"name":"limit","value":"50"},{"name":"page","value":"0"}],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":6,"shouldDisplayMessage":true,"attachmentsCount":3,"attachmentStep":false,"hasContent":true},"afterStages":[{"name":"comment_factory::0","time":{"start":1769709905747,"stop":1769709906026,"duration":279},"status":"passed","steps":[{"name":"Delete comment by id: '697ba136f0b163fc639dbfb6'","time":{"start":1769709905747,"stop":1769709906026,"duration":279},"status":"passed","steps":[{"name":"DELETE /comment/'697ba136f0b163fc639dbfb6' (raw)","time":{"start":1769709905747,"stop":1769709906026,"duration":279},"status":"passed","steps":[],"attachments":[{"uid":"caaba4ad8f3e0ea2","name":"API Response","source":"caaba4ad8f3e0ea2.json","type":"application/json","size":40}],"parameters":[{"name":"comment_id","value":"'697ba136f0b163fc639dbfb6'"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[{"name":"comment_id","value":"'697ba136f0b163fc639dbfb6'"},{"name":"allow_not_found","value":"True"}],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true},{"name":"post_factory::0","time":{"start":1769709906042,"stop":1769709906280,"duration":238},"status":"passed","steps":[{"name":"Delete post by id: '697ba136699468306314bc72'","time":{"start":1769709906042,"stop":1769709906280,"duration":238},"status":"passed","steps":[{"name":"DELETE /post/'697ba136699468306314bc72' (raw)","time":{"start":1769709906042,"stop":1769709906280,"duration":238},"status":"passed","steps":[],"attachments":[{"uid":"5fbe347e319cf01e","name":"API Response","source":"5fbe347e319cf01e.json","type":"application/json","size":40}],"parameters":[{"name":"post_id","value":"'697ba136699468306314bc72'"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[{"name":"post_id","value":"'697ba136699468306314bc72'"},{"name":"allow_not_found","value":"True"}],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true},{"name":"user_factory::0","time":{"start":1769709906294,"stop":1769709912700,"duration":6406},"status":"failed","statusMessage":"AssertionError: {'error': 'SERVER_ERROR'}\n","statusTrace":"  File \"C:\\Users\\14bas\\PycharmProjects\\api-test-0\\.venv\\Lib\\site-packages\\allure_commons\\_allure.py\", line 231, in __call__\n    return self._fixture_function(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\14bas\\PycharmProjects\\api-test-0\\.venv\\Lib\\site-packages\\_pytest\\fixtures.py\", line 924, in _teardown_yield_fixture\n    next(it)\n  File \"C:\\Users\\14bas\\PycharmProjects\\api-test-0\\tests\\conftest.py\", line 96, in user_factory\n    users_api.delete_user(user_id, allow_not_found=True)\n  File \"C:\\Users\\14bas\\PycharmProjects\\api-test-0\\.venv\\Lib\\site-packages\\allure_commons\\_allure.py\", line 202, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"C:\\Users\\14bas\\PycharmProjects\\api-test-0\\services\\users\\api_users.py\", line 105, in delete_user\n    assert response.status_code in (200, 204), body\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"Delete user by id: '697ba1368c520505ccfd2007'","time":{"start":1769709906294,"stop":1769709912700,"duration":6406},"status":"failed","statusMessage":"AssertionError: {'error': 'SERVER_ERROR'}\n","statusTrace":"  File \"C:\\Users\\14bas\\PycharmProjects\\api-test-0\\.venv\\Lib\\site-packages\\allure_commons\\_allure.py\", line 202, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"C:\\Users\\14bas\\PycharmProjects\\api-test-0\\services\\users\\api_users.py\", line 105, in delete_user\n    assert response.status_code in (200, 204), body\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"DELETE /user/'697ba1368c520505ccfd2007' (raw)","time":{"start":1769709906294,"stop":1769709912700,"duration":6406},"status":"passed","steps":[],"attachments":[{"uid":"f76caf86eb8ce25","name":"API Response","source":"f76caf86eb8ce25.json","type":"application/json","size":31}],"parameters":[{"name":"user_id","value":"'697ba1368c520505ccfd2007'"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[{"name":"user_id","value":"'697ba1368c520505ccfd2007'"},{"name":"allow_not_found","value":"True"}],"stepsCount":1,"shouldDisplayMessage":true,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true},{"name":"http::0","time":{"start":1769709962933,"stop":1769709962933,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false}],"labels":[{"name":"feature","value":"Comments"},{"name":"epic","value":"Administration"},{"name":"tag","value":"regression"},{"name":"parentSuite","value":"tests.comments"},{"name":"suite","value":"test_comments_regression"},{"name":"subSuite","value":"TestComments"},{"name":"host","value":"keni"},{"name":"thread","value":"18868-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.comments.test_comments_regression"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"fa0d321d9b741982","status":"passed","time":{"start":1769699728572,"stop":1769699729518,"duration":946}}],"categories":[{"name":"Product defects","matchedStatuses":[]}],"history":{"statistic":{"failed":4,"broken":0,"skipped":0,"passed":4,"unknown":0,"total":8},"items":[{"uid":"8ee9d27b5277e473","status":"failed","statusDetails":"AssertionError: {'error': 'SERVER_ERROR'}","time":{"start":1769709904931,"stop":1769709905747,"duration":816}},{"uid":"2d18f64d2e180b81","status":"failed","statusDetails":"AssertionError: {'error': 'SERVER_ERROR'}","time":{"start":1769709904931,"stop":1769709905747,"duration":816}},{"uid":"805e4826a8b17827","status":"failed","statusDetails":"AssertionError: {'error': 'SERVER_ERROR'}","time":{"start":1769709904931,"stop":1769709905747,"duration":816}},{"uid":"9a47fc7dfae321d5","status":"passed","time":{"start":1769699728572,"stop":1769699729518,"duration":946}},{"uid":"3523a6bd0aaece68","status":"passed","time":{"start":1769699728572,"stop":1769699729518,"duration":946}},{"uid":"b7e8f89b2ac7d98f","status":"passed","time":{"start":1769699728572,"stop":1769699729518,"duration":946}},{"uid":"e30cb92f0c09463","status":"passed","time":{"start":1769699728572,"stop":1769699729518,"duration":946}}]},"tags":["regression"]},"source":"a27197cfa6de4a9a.json","parameterValues":[]}