{"uid":"64e0fc1c2812e502","name":"DELETE /comment/{id} -> Delete comment by id","fullName":"tests.comments.test_comments_crud.TestCommentsCRUD#test_delete_comment_by_id","historyId":"41922b52934ce99df191085ae1b695ee","time":{"start":1769709878183,"stop":1769709879277,"duration":1094},"status":"failed","statusMessage":"AssertionError: {'error': 'SERVER_ERROR'}","statusTrace":"self = <test_comments_crud.TestCommentsCRUD object at 0x00000163D0E8C2F0>\ncreated_user = ('697ba11b69946825df14bc6c', UserModel(id='697ba11b69946825df14bc6c', email='autotest_4796af6a72be48d48444fbd3685c5581@example.com', firstName='Michael', lastName='Carroll', dateOfBirth='1921-08-18T00:00:00.000Z', phone='3400746003527'))\npost_factory = <function post_factory.<locals>.create at 0x00000163D0F0D6C0>, comment_factory = <function comment_factory.<locals>.create at 0x00000163D0F0CD60>\n\n    @allure.title(\"DELETE /comment/{id} -> Delete comment by id\")\n    def test_delete_comment_by_id(self, created_user, post_factory, comment_factory):\n        user_id, _ = created_user\n        post_id, _ = post_factory(owner_id=user_id)\n    \n>       comment_id, _ = comment_factory(owner_id=user_id, post_id=post_id)\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\comments\\test_comments_crud.py:60: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ntests\\conftest.py:178: in create\n    comment_id, comment = comments_api.create_comment(owner_id=owner_id, post_id=post_id)\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <services.comments.api_comments.CommentsAPI object at 0x00000163D0EF0920>, owner_id = '697ba11b69946825df14bc6c', post_id = '697ba11ba998d708b34c0ef2'\npayload = {'message': 'Auto comment cc16b67d', 'owner': '697ba11b69946825df14bc6c', 'post': '697ba11ba998d708b34c0ef2'}\n\n    @allure.step(\"Create comment (owner={owner_id}, post={post_id})\")\n    def create_comment(self, owner_id: str, post_id: str, payload: dict | None = None) -> tuple[str, CommentModel]:\n        if payload is None:\n            payload = CommentPayloads.create_comment(owner_id=owner_id, post_id=post_id)\n    \n        resp = self.create_comment_response(payload)\n        body = resp.json()\n>       assert resp.status_code in (200, 201), body\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE       AssertionError: {'error': 'SERVER_ERROR'}\n\nservices\\comments\\api_comments.py:54: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1769709855026,"stop":1769709855026,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"_session_faker","time":{"start":1769709855026,"stop":1769709855026,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"env_check","time":{"start":1769709855026,"stop":1769709855636,"duration":610},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"api_token","time":{"start":1769709855026,"stop":1769709855026,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"http","time":{"start":1769709855026,"stop":1769709855026,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"comments_api","time":{"start":1769709855636,"stop":1769709855636,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"comment_endpoints","time":{"start":1769709855636,"stop":1769709855636,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"post_endpoints","time":{"start":1769709855636,"stop":1769709855636,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"users_api","time":{"start":1769709855636,"stop":1769709855636,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"posts_api","time":{"start":1769709855636,"stop":1769709855636,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"endpoints","time":{"start":1769709855636,"stop":1769709855636,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"_init_clients","time":{"start":1769709877947,"stop":1769709877947,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"user_factory","time":{"start":1769709877947,"stop":1769709877947,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"created_user","time":{"start":1769709877947,"stop":1769709878183,"duration":236},"status":"passed","steps":[{"name":"Create user","time":{"start":1769709877947,"stop":1769709878183,"duration":236},"status":"passed","steps":[{"name":"POST /user/create (raw)","time":{"start":1769709877947,"stop":1769709878183,"duration":236},"status":"passed","steps":[],"attachments":[{"uid":"c258529c50a6fe59","name":"API Response","source":"c258529c50a6fe59.json","type":"application/json","size":337}],"parameters":[{"name":"payload","value":"None"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true},{"name":"post_factory","time":{"start":1769709878183,"stop":1769709878183,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"comment_factory","time":{"start":1769709878183,"stop":1769709878183,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: {'error': 'SERVER_ERROR'}","statusTrace":"self = <test_comments_crud.TestCommentsCRUD object at 0x00000163D0E8C2F0>\ncreated_user = ('697ba11b69946825df14bc6c', UserModel(id='697ba11b69946825df14bc6c', email='autotest_4796af6a72be48d48444fbd3685c5581@example.com', firstName='Michael', lastName='Carroll', dateOfBirth='1921-08-18T00:00:00.000Z', phone='3400746003527'))\npost_factory = <function post_factory.<locals>.create at 0x00000163D0F0D6C0>, comment_factory = <function comment_factory.<locals>.create at 0x00000163D0F0CD60>\n\n    @allure.title(\"DELETE /comment/{id} -> Delete comment by id\")\n    def test_delete_comment_by_id(self, created_user, post_factory, comment_factory):\n        user_id, _ = created_user\n        post_id, _ = post_factory(owner_id=user_id)\n    \n>       comment_id, _ = comment_factory(owner_id=user_id, post_id=post_id)\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\comments\\test_comments_crud.py:60: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ntests\\conftest.py:178: in create\n    comment_id, comment = comments_api.create_comment(owner_id=owner_id, post_id=post_id)\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <services.comments.api_comments.CommentsAPI object at 0x00000163D0EF0920>, owner_id = '697ba11b69946825df14bc6c', post_id = '697ba11ba998d708b34c0ef2'\npayload = {'message': 'Auto comment cc16b67d', 'owner': '697ba11b69946825df14bc6c', 'post': '697ba11ba998d708b34c0ef2'}\n\n    @allure.step(\"Create comment (owner={owner_id}, post={post_id})\")\n    def create_comment(self, owner_id: str, post_id: str, payload: dict | None = None) -> tuple[str, CommentModel]:\n        if payload is None:\n            payload = CommentPayloads.create_comment(owner_id=owner_id, post_id=post_id)\n    \n        resp = self.create_comment_response(payload)\n        body = resp.json()\n>       assert resp.status_code in (200, 201), body\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE       AssertionError: {'error': 'SERVER_ERROR'}\n\nservices\\comments\\api_comments.py:54: AssertionError","steps":[{"name":"Create post (owner='697ba11b69946825df14bc6c')","time":{"start":1769709878183,"stop":1769709878698,"duration":515},"status":"passed","steps":[{"name":"POST /post/create (raw)","time":{"start":1769709878183,"stop":1769709878698,"duration":515},"status":"passed","steps":[],"attachments":[{"uid":"ddc82f3fa4e462d8","name":"API Response","source":"ddc82f3fa4e462d8.json","type":"application/json","size":452}],"parameters":[{"name":"payload","value":"{'text': 'Auto post 0a899402', 'image': 'https://images.unsplash.com/photo-1542291026-7eec264c27ff', 'likes': 0, 'tags': ['qa', 'pytest'], 'owner': '697ba11b69946825df14bc6c'}"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[{"name":"owner_id","value":"'697ba11b69946825df14bc6c'"},{"name":"payload","value":"None"}],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true},{"name":"Create comment (owner='697ba11b69946825df14bc6c', post='697ba11ba998d708b34c0ef2')","time":{"start":1769709878698,"stop":1769709879277,"duration":579},"status":"failed","statusMessage":"AssertionError: {'error': 'SERVER_ERROR'}\n","statusTrace":"  File \"C:\\Users\\14bas\\PycharmProjects\\api-test-0\\.venv\\Lib\\site-packages\\allure_commons\\_allure.py\", line 202, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"C:\\Users\\14bas\\PycharmProjects\\api-test-0\\services\\comments\\api_comments.py\", line 54, in create_comment\n    assert resp.status_code in (200, 201), body\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"POST /comment/create (raw)","time":{"start":1769709878698,"stop":1769709879277,"duration":579},"status":"passed","steps":[],"attachments":[{"uid":"c0d120fd6c37b19f","name":"API Response","source":"c0d120fd6c37b19f.json","type":"application/json","size":31}],"parameters":[{"name":"payload","value":"{'message': 'Auto comment cc16b67d', 'owner': '697ba11b69946825df14bc6c', 'post': '697ba11ba998d708b34c0ef2'}"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[{"name":"owner_id","value":"'697ba11b69946825df14bc6c'"},{"name":"post_id","value":"'697ba11ba998d708b34c0ef2'"},{"name":"payload","value":"None"}],"stepsCount":1,"shouldDisplayMessage":true,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":4,"shouldDisplayMessage":true,"attachmentsCount":2,"attachmentStep":false,"hasContent":true},"afterStages":[{"name":"comment_factory::0","time":{"start":1769709879277,"stop":1769709879277,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false},{"name":"post_factory::0","time":{"start":1769709879293,"stop":1769709879592,"duration":299},"status":"passed","steps":[{"name":"Delete post by id: '697ba11ba998d708b34c0ef2'","time":{"start":1769709879293,"stop":1769709879592,"duration":299},"status":"passed","steps":[{"name":"DELETE /post/'697ba11ba998d708b34c0ef2' (raw)","time":{"start":1769709879293,"stop":1769709879592,"duration":299},"status":"passed","steps":[],"attachments":[{"uid":"9591a30ff2d765de","name":"API Response","source":"9591a30ff2d765de.json","type":"application/json","size":40}],"parameters":[{"name":"post_id","value":"'697ba11ba998d708b34c0ef2'"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[{"name":"post_id","value":"'697ba11ba998d708b34c0ef2'"},{"name":"allow_not_found","value":"True"}],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true},{"name":"user_factory::0","time":{"start":1769709879592,"stop":1769709879809,"duration":217},"status":"passed","steps":[{"name":"Delete user by id: '697ba11b69946825df14bc6c'","time":{"start":1769709879592,"stop":1769709879809,"duration":217},"status":"passed","steps":[{"name":"DELETE /user/'697ba11b69946825df14bc6c' (raw)","time":{"start":1769709879592,"stop":1769709879809,"duration":217},"status":"passed","steps":[],"attachments":[{"uid":"c2f5a020d426dc52","name":"API Response","source":"c2f5a020d426dc52.json","type":"application/json","size":40}],"parameters":[{"name":"user_id","value":"'697ba11b69946825df14bc6c'"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[{"name":"user_id","value":"'697ba11b69946825df14bc6c'"},{"name":"allow_not_found","value":"True"}],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":1,"attachmentStep":false,"hasContent":true},{"name":"http::0","time":{"start":1769709962933,"stop":1769709962933,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"hasContent":false}],"labels":[{"name":"feature","value":"Comments"},{"name":"epic","value":"Administration"},{"name":"tag","value":"smoke"},{"name":"parentSuite","value":"tests.comments"},{"name":"suite","value":"test_comments_crud"},{"name":"subSuite","value":"TestCommentsCRUD"},{"name":"host","value":"keni"},{"name":"thread","value":"18868-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.comments.test_comments_crud"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["smoke"]},"source":"64e0fc1c2812e502.json","parameterValues":[]}